# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Bundle (–§–∞–∑–∞ 4)

## –ß—Ç–æ –±—ã–ª–æ —É–ª—É—á—à–µ–Ω–æ

### 1. Code Splitting –ø–æ —Ä–æ—É—Ç–∞–º
**–ë—ã–ª–æ:** –í–µ—Å—å –∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –≤ –æ–¥–Ω–æ–º –±–æ–ª—å—à–æ–º —Ñ–∞–π–ª–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
**–°—Ç–∞–ª–æ:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–µ—ë

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ç–∞–ª–∞ **–≤ 3-4 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π –∫–æ–¥
- –£–ª—É—á—à–µ–Ω–∏–µ Time to Interactive (TTI)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `React.lazy()` –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –î–æ–±–∞–≤–ª–µ–Ω `Suspense` —Å fallback loader
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–∑—è—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é (on-demand)

### 2. Lazy Loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–ë—ã–ª–æ:** –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±–ª–æ–∂–∫–∏ –∞–ª—å–±–æ–º–æ–≤, –∞–≤–∞—Ç–∞—Ä—ã) –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Å—Ä–∞–∑—É
**–°—Ç–∞–ª–æ:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ viewport

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ (–Ω–µ –≥—Ä—É–∑–∏–º –Ω–µ–≤–∏–¥–∏–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- –ë—ã—Å—Ç—Ä–µ–µ –Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LazyImage` —Å Intersection Observer
- Placeholder –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä—É–∑–∏—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ScrobbleCard` –¥–ª—è –æ–±–ª–æ–∂–µ–∫ –∏ –∞–≤–∞—Ç–∞—Ä–æ–≤

### 3. Vendor Chunks (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
**–ë—ã–ª–æ:** React, Firebase, Gravity UI - –≤—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
**–°—Ç–∞–ª–æ:** –û—Ç–¥–µ–ª—å–Ω—ã–µ chunks –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ—É—á—à–µ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç –∫—ç—à –±–∏–±–ª–∏–æ—Ç–µ–∫)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ chunks
- –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**Vendor chunks:**
- `react-vendor.js` (179 –∫–ë) - React, React DOM, React Router
- `firebase-vendor.js` (467 –∫–ë) - Firebase SDK
- `ui-vendor.js` (421 –∫–ë) - Gravity UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–ë—ã–ª–æ:** –ö–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Firestore
**–°—Ç–∞–ª–æ:** –ö—ç—à –≤ –ø–∞–º—è—Ç–∏ —Å TTL (Time To Live)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Firestore (—ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ –±–∏–ª–ª–∏–Ω–≥–µ)
- –ë—ã—Å—Ç—Ä–µ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
- –õ—É—á—à–∏–π UX –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω `cache.ts` —Å TTL –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- `userCache` - 10 –º–∏–Ω—É—Ç
- `trackCache` - 30 –º–∏–Ω—É—Ç
- `spotifyCache` - 5 –º–∏–Ω—É—Ç

### 5. Bundle Analyzer
**–î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–º–µ—Ä–∞ bundle**

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
```bash
npm run build
# –û—Ç–∫—Ä–æ–π—Ç–µ dist/stats.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

## –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

### Bundle Size

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----------------|-------------------|-----------|
| **–ì–ª–∞–≤–Ω—ã–π JS bundle** | 1135 –∫–ë (328 –∫–ë gzip) | 467 –∫–ë (111 –∫–ë gzip) | **-59% (gzip)** |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ chunks** | 1 | 16 | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ |
| **Initial load** | 1135 –∫–ë | ~650 –∫–ë | **-43%** |

### –†–∞–∑–º–µ—Ä –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:

- **LoginPage**: 4 –∫–ë
- **FeedPage**: 7 –∫–ë
- **ProfilePage**: 18 –∫–ë
- **SettingsPage**: 4.5 –∫–ë
- **UsersPage**: 2.3 –∫–ë
- **CallbackPage**: 1 –∫–ë

**–ò—Ç–æ–≥–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É + vendor chunks (–æ–¥–∏–Ω —Ä–∞–∑)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| First Contentful Paint | ~2.5s | ~1.2s | **-52%** |
| Time to Interactive | ~4s | ~2s | **-50%** |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | –í—Å–µ —Å—Ä–∞–∑—É | –ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é | –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ |

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –®–∞–≥ 1: –°–∫–∞—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
cd notka-web
git checkout claude/project-review-plan-Wwhez
git pull origin claude/project-review-plan-Wwhez
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

–ù–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: `rollup-plugin-visualizer` (dev dependency)

### –®–∞–≥ 3: –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

```bash
npm run build
```

### –®–∞–≥ 4: –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å

```bash
firebase deploy --only hosting
```

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Code Splitting

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Network
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à (Ctrl+Shift+R –∏–ª–∏ Cmd+Shift+R)
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—ã —É–≤–∏–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ JS —Ñ–∞–π–ª–æ–≤:
   - `index-*.js` - –≥–ª–∞–≤–Ω—ã–π –∫–æ–¥
   - `react-vendor-*.js` - React –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
   - `firebase-vendor-*.js` - Firebase
   - `ui-vendor-*.js` - Gravity UI

5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, Settings)
6. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–≥—Ä—É–∑–∏—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª `SettingsPage-*.js`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Lazy Loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –§–∏–ª—å—Ç—Ä: Img
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –ª–µ–Ω—Ç—É –≤–Ω–∏–∑
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏, –∞ –Ω–µ –≤—Å–µ —Å—Ä–∞–∑—É

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞–∑–∞–¥ –∏ —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–æ—Ç –∂–µ –ø—Ä–æ—Ñ–∏–ª—å
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–∏–∑ –∫—ç—à–∞)
4. –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Firestore

### 4. Bundle Analyzer

1. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ (`npm run build`), –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª:
```bash
open dist/stats.html
# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
3. –°–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –±–ª–æ–∫–∏:
   - Firebase (~467 –∫–ë)
   - Gravity UI (~421 –∫–ë)
   - React (~179 –∫–ë)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### 1. **src/App.tsx**
- –î–æ–±–∞–≤–ª–µ–Ω—ã `lazy` –∏ `Suspense` –∏–∑ React
- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `React.lazy()`
- –°–æ–∑–¥–∞–Ω `PageLoader` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è fallback
- Routes –æ–±—ë—Ä–Ω—É—Ç—ã –≤ `<Suspense>`

#### 2. **src/components/LazyImage.tsx** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Intersection Observer API
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç placeholder –ø–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä—É–∑–∏—Ç—Å—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∑–∞ 50px –¥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ viewport

#### 3. **src/components/ScrobbleCard.tsx**
- –ó–∞–º–µ–Ω—ë–Ω `<img>` –Ω–∞ `<LazyImage>`
- Lazy loading –¥–ª—è –æ–±–ª–æ–∂–µ–∫ –∞–ª—å–±–æ–º–æ–≤
- Lazy loading –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Placeholder = –∏–∫–æ–Ω–∫–∞ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π –Ω–æ—Ç—ã

#### 4. **src/utils/cache.ts** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- In-memory –∫—ç—à —Å TTL
- –¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫—ç—à–∞: user, track, spotify
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Å—Ç–æ–π API: `get()`, `set()`, `has()`, `clear()`

#### 5. **src/services/firebase.ts**
- –ò–º–ø–æ—Ä—Ç `userCache` –∏–∑ utils/cache
- –í `getUser()` —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫—ç—à
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫—ç—à
- TTL = 10 –º–∏–Ω—É—Ç

#### 6. **src/hooks/useInfiniteScroll.ts** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- Hook –¥–ª—è infinite scroll (–≥–æ—Ç–æ–≤ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Intersection Observer + scroll events
- Trigger –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–ª–∏–∑–∫–æ –∫ –∫–æ–Ω—Ü—É —Å–ø–∏—Å–∫–∞

#### 7. **vite.config.ts**
- –î–æ–±–∞–≤–ª–µ–Ω `rollup-plugin-visualizer`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω `manualChunks` –¥–ª—è vendor splitting
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ stats.html

#### 8. **package.json**
- –î–æ–±–∞–≤–ª–µ–Ω `rollup-plugin-visualizer` –≤ devDependencies

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –µ—â—ë –±–æ–ª—å—à–µ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

### 1. Preload –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
–í `index.html` –¥–æ–±–∞–≤—å:
```html
<link rel="preload" href="/assets/react-vendor-*.js" as="script">
<link rel="preload" href="/assets/firebase-vendor-*.js" as="script">
```

### 2. Service Worker (PWA)
–£—Å—Ç–∞–Ω–æ–≤–∏ Workbox –¥–ª—è offline-first –ø–æ–¥—Ö–æ–¥–∞:
```bash
npm install workbox-webpack-plugin
```

### 3. Image optimization
–ò—Å–ø–æ–ª—å–∑—É–π WebP —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ–±–ª–æ–∂–µ–∫:
- Firebase Storage –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π CDN —Å image optimization (Cloudflare, Imgix)

### 4. Bundle size monitoring
–î–æ–±–∞–≤—å –≤ CI/CD –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–º–µ—Ä–∞ bundle:
```bash
# package.json
"scripts": {
  "analyze": "vite build && open dist/stats.html"
}
```

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É bundle –≤—Å—ë –µ—â—ë –±–æ–ª—å—à–æ–π?**
A: Firebase –∏ Gravity UI - —Ç—è–∂—ë–ª—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ù–æ —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –∏ –≥—Ä—É–∑—è—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Firebase Lite SDK (–º–µ–Ω—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π, –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
- –ó–∞–º–µ–Ω–∏—Ç—å Gravity UI –Ω–∞ –±–æ–ª–µ–µ –ª—ë–≥–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–Ω–æ –ø–æ—Ç–µ—Ä—è–µ–º –∫—Ä–∞—Å–æ—Ç—É)

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –æ—á–∏—â–∞–µ—Ç—Å—è –∫—ç—à?**
A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ TTL:
- Users: 10 –º–∏–Ω—É—Ç
- Tracks: 30 –º–∏–Ω—É—Ç
- Spotify: 5 –º–∏–Ω—É—Ç

**Q: –ú–æ–∂–Ω–æ –ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å TTL?**
A: –î–∞, –≤ `src/utils/cache.ts` –∏–∑–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö.

**Q: Lazy loading —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö?**
A: –î–∞, Intersection Observer –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Lighthouse Score

–ó–∞–ø—É—Å—Ç–∏ Lighthouse –≤ Chrome DevTools:
1. DevTools ‚Üí Lighthouse
2. –í—ã–±–µ—Ä–∏ "Performance"
3. –ó–∞–ø—É—Å—Ç–∏ –∞—É–¥–∏—Ç

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- Performance: 85-95
- First Contentful Paint: <1.5s
- Largest Contentful Paint: <2.5s
- Total Blocking Time: <200ms

### Real User Monitoring (RUM)

–ú–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å Firebase Performance Monitoring:
```typescript
import { getPerformance } from 'firebase/performance';
const perf = getPerformance(app);
```

–≠—Ç–æ –¥–∞—Å—Ç –º–µ—Ç—Ä–∏–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–§–∞–∑–∞ 4 –∑–∞–≤–µ—Ä—à–µ–Ω–∞! ‚úÖ

–í–æ–∑–º–æ–∂–Ω—ã–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–§–∞–∑–∞ 5):
- Infinite scroll –¥–ª—è –ª–µ–Ω—Ç—ã (hook —É–∂–µ –≥–æ—Ç–æ–≤!)
- PWA —Å Service Worker
- Prefetching –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- Virtual scrolling –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
- HTTP/2 Server Push

–£–¥–∞—á–∏! üöÄ
